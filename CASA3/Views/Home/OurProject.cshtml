@model Core.ViewModels.OurProjectVM

@{
    ViewData["Title"] = "Our Project";
}

<!-- Main Content Section -->
<section class="bg-white py-12 md:py-20">
    <div class="max-w-7xl mx-auto px-6 lg:px-8">
        <!-- Title Section -->
        <div class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 mb-4 tracking-wide">
                MORE THAN A HOME
            </h1>
            <div class="w-24 h-px bg-gray-300 mx-auto"></div>
        </div>

        <!-- Description Section -->
        <div class="max-w-4xl mb-12 md:mb-16">
            <p class="text-sm md:text-base text-gray-500 leading-relaxed">
                We are a purpose-driven real estate company dedicated to creating sustainable living solutions that meet today's needs while thriving as long-term investments. Through our thoughtfully designed, integrated communities, we redefine modern living with a focus on comfort, innovation, and environmental responsibility. We combine cutting-edge technology and forward-thinking design to offer a refined lifestyle experience that enhances quality living.
            </p>
        </div>

        <!-- Category Filters -->
        <div class="flex flex-wrap justify-start gap-3 md:gap-4 mb-12 md:mb-16">
            <button class="category-filter px-6 md:px-8 py-2.5 md:py-3 text-xs md:text-sm font-semibold tracking-wider transition-all duration-200 
                          @(Model.SelectedCategory == "LUXURY" ? "bg-gray-800 text-white" : "bg-gray-200 text-gray-700 hover:bg-gray-300")"
                    data-category="LUXURY">
                LUXURY
            </button>
            <button class="category-filter px-6 md:px-8 py-2.5 md:py-3 text-xs md:text-sm font-semibold tracking-wider transition-all duration-200 
                          @(Model.SelectedCategory == "PREMIUM" ? "bg-gray-800 text-white" : "bg-gray-200 text-gray-700 hover:bg-gray-300")"
                    data-category="PREMIUM">
                PREMIUM
            </button>
            <button class="category-filter px-6 md:px-8 py-2.5 md:py-3 text-xs md:text-sm font-semibold tracking-wider transition-all duration-200 
                          @(Model.SelectedCategory == "MID-PREMIUM" ? "bg-gray-800 text-white" : "bg-gray-200 text-gray-700 hover:bg-gray-300")"
                    data-category="MID-PREMIUM">
                MID-PREMIUM
            </button>
        </div>

        <!-- Projects Grid -->
        <div id="projectsContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 md:gap-8">
            @foreach (var project in Model.Projects)
            {
                <div class="project-card group" data-category="@Model.SelectedCategory">
                    <!-- Project Image -->
                    <div class="relative overflow-hidden mb-4 aspect-[4/3] bg-gray-200">
                        <img src="@(string.IsNullOrEmpty(project.HeroImageUrl) ? "/images/projects/project-1.webp" : project.HeroImageUrl)" 
                             alt="@project.Name" 
                             class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105">
                    </div>

                    <!-- Project Name -->
                    <h3 class="text-lg md:text-xl font-semibold text-gray-900 mb-4">@project.Name</h3>

                    <!-- Discover More Button -->
                    <a href="@(string.IsNullOrEmpty(project.Url) ? $"/projects/{project.Id}" : project.Url)" 
                       class="inline-block bg-gray-800 text-white px-5 md:px-6 py-2.5 md:py-3 text-xs md:text-sm font-semibold tracking-wide hover:bg-gray-700 transition-colors duration-200">
                        Discover More
                    </a>
                </div>
            }
        </div>

        <!-- Empty State -->
        <div id="emptyState" class="hidden text-center py-16">
            <p class="text-gray-500 text-lg">No projects found in this category.</p>
        </div>
    </div>
</section>

@section Scripts {
    <script>
        $(document).ready(function() {
            // Category filter functionality
            $('.category-filter').on('click', function() {
                const selectedCategory = $(this).data('category');
                
                // Update active state
                $('.category-filter').removeClass('bg-gray-800 text-white').addClass('bg-gray-200 text-gray-700');
                $(this).removeClass('bg-gray-200 text-gray-700').addClass('bg-gray-800 text-white');
                
                // Update URL without page reload
                const url = new URL(window.location);
                url.searchParams.set('category', selectedCategory);
                window.history.pushState({}, '', url);
                
                // Filter projects (for now, show all projects since category is not in model)
                // This can be enhanced when category field is added to Project model
                filterProjects(selectedCategory);
            });

            function filterProjects(category) {
                // For now, show all projects since we don't have category in the model
                // This is a placeholder for future implementation
                $('.project-card').show();
                
                // If no projects match, show empty state
                const visibleProjects = $('.project-card:visible').length;
                if (visibleProjects === 0) {
                    $('#projectsContainer').hide();
                    $('#emptyState').removeClass('hidden');
                } else {
                    $('#projectsContainer').show();
                    $('#emptyState').addClass('hidden');
                }
            }

            // Initialize on page load
            filterProjects('@Model.SelectedCategory');
        });
    </script>
}
